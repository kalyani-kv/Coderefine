<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>CodeRefine AI Hub | Auth ü§ñ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body class="bg-slate-900 flex items-center justify-center min-h-screen text-white">

<div class="w-full max-w-md p-8 bg-slate-800 rounded-2xl shadow-2xl text-center">

    <h1 class="text-3xl font-bold mb-6">ü§ñ CodeRefine AI Hub</h1>
    <p class="text-slate-400 mb-6">Login if you already have an account or Sign In to create one</p>

    <div class="flex flex-col gap-4">
        <button id="loginBtn" class="bg-blue-600 hover:bg-blue-700 p-3 rounded font-semibold">
            <i class="fa-solid fa-right-to-bracket"></i> Login
        </button>

        <button id="signupBtn" class="bg-green-600 hover:bg-green-700 p-3 rounded font-semibold">
            <i class="fa-solid fa-user-plus"></i> Sign In
        </button>
    </div>

    <p class="text-slate-400 mt-6 text-sm">¬© 2026 CodeRefine AI Hub</p>
</div>

<!-- Login Modal -->
<div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center">
    <div class="bg-slate-800 p-8 rounded-xl w-full max-w-md">
        <h2 class="text-xl font-bold mb-4">Login</h2>
        <form id="loginForm" class="space-y-4">
            <input type="email" id="loginEmail" placeholder="Email" class="w-full p-3 rounded bg-slate-700" required>
            <input type="password" id="loginPassword" placeholder="Password" class="w-full p-3 rounded bg-slate-700" required>
            <button type="submit" class="w-full bg-blue-600 p-3 rounded font-semibold">Login</button>
        </form>
        <button id="forgotBtn" class="mt-2 text-sm text-yellow-400 underline">Forgot Password?</button>
        <button id="loginClose" class="mt-3 text-sm text-slate-400 underline">Close</button>
    </div>
</div>

<!-- Sign Up Modal -->
<div id="signupModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center">
    <div class="bg-slate-800 p-8 rounded-xl w-full max-w-md">
        <h2 class="text-xl font-bold mb-4">Sign In</h2>
        <form id="signupForm" class="space-y-4">
            <input type="email" id="signupEmail" placeholder="Email" class="w-full p-3 rounded bg-slate-700" required>
            <input type="password" id="signupPassword" placeholder="Password" class="w-full p-3 rounded bg-slate-700" required>
            <input type="password" id="signupConfirm" placeholder="Confirm Password" class="w-full p-3 rounded bg-slate-700" required>
            <button type="submit" class="w-full bg-green-600 p-3 rounded font-semibold">Sign In</button>
        </form>
        <button id="signupClose" class="mt-3 text-sm text-slate-400 underline">Close</button>
    </div>
</div>

<script>
    // Users stored in localStorage
    let users = JSON.parse(localStorage.getItem('users') || '[]');

    // Buttons
    const loginBtn = document.getElementById('loginBtn');
    const signupBtn = document.getElementById('signupBtn');
    const loginModal = document.getElementById('loginModal');
    const signupModal = document.getElementById('signupModal');
    const loginClose = document.getElementById('loginClose');
    const signupClose = document.getElementById('signupClose');
    const forgotBtn = document.getElementById('forgotBtn');

    // Open Modals
    loginBtn.addEventListener('click', () => loginModal.classList.remove('hidden'));
    signupBtn.addEventListener('click', () => signupModal.classList.remove('hidden'));
    loginClose.addEventListener('click', () => loginModal.classList.add('hidden'));
    signupClose.addEventListener('click', () => signupModal.classList.add('hidden'));

    // Forgot Password with confirm password
    forgotBtn.addEventListener('click', () => {
        const email = prompt("Enter your email to reset password:");
        if(!email) return;

        const user = users.find(u => u.email === email.trim());
        if(user){
            const newPassword = prompt("Enter your new password:");
            if(!newPassword) return;
            const confirmPassword = prompt("Confirm your new password:");
            if(!confirmPassword) return;

            if(newPassword.trim() !== confirmPassword.trim()){
                alert("‚ùå Passwords do not match!");
                return;
            }

            user.password = newPassword.trim();
            localStorage.setItem('users', JSON.stringify(users));
            alert("‚úÖ Password reset successful! You can now login with new password.");
        } else {
            alert("‚ùå Email not found!");
        }
    });

    // Login Form
    document.getElementById('loginForm').addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('loginEmail').value.trim();
        const password = document.getElementById('loginPassword').value.trim();

        const user = users.find(u => u.email === email);
        if(user){
            if(user.password === password){
                alert('‚úÖ Login Successful!');
                localStorage.setItem('currentUser', email);
                window.location.href = 'index.html';
            } else {
                alert('‚ùå Incorrect password!');
            }
        } else {
            alert('‚ùå Email not found. Please Sign In.');
            loginModal.classList.add('hidden');
            signupModal.classList.remove('hidden');
        }
    });

    // Sign Up Form
    document.getElementById('signupForm').addEventListener('submit', e => {
        e.preventDefault();
        const email = document.getElementById('signupEmail').value.trim();
        const password = document.getElementById('signupPassword').value.trim();
        const confirm = document.getElementById('signupConfirm').value.trim();

        if(password !== confirm){
            alert('‚ùå Passwords do not match!');
            return;
        }

        const exists = users.find(u => u.email === email);
        if(exists){
            alert('‚ùå Email already exists! Try Login.');
            signupModal.classList.add('hidden');
            loginModal.classList.remove('hidden');
            return;
        }

        users.push({email, password});
        localStorage.setItem('users', JSON.stringify(users));
        alert('‚úÖ Sign In Successful! You can now login.');
        signupModal.classList.add('hidden');
        loginModal.classList.remove('hidden');
    });
</script>

</body>
</html>
